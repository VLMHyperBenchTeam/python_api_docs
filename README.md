# Генератор документации для Python-пакетов

Этот проект предназначен для автоматической генерации документации `API` в формате `Markdown`-файлов для Python-пакетов, размещенных на `GitHub` из исходного кода.

Документация создается с использованием `pydoc-markdown`.

Полученные `Markdown`-файлы с документацией модулей далее используются для сайта документации на `Docusaurus`.

## Как это работает?

* Запускается Docker-контейнера с примонтированным каталогом проекта

Внутри Docker-контейнера происходит:
1. Считывание url GitHub-репозиториев и тегов их версий из файла `repos.txt`

2. Запуск цикла из шагов для каждого `GitHub`-репо, содержащего python-пакет:
* **Клонирование репозиториев**:

Скрипт клонирует каждый репозиторий с python-пакетом из `repos.txt` во временную директорию `/tmp`. по его url и тегу.

* **Создание виртуального окружения**:

Создание изолированного виртуального окружения для этого python-пакета.

* **Установка пакетов**:

Установка Python-пакета в это виртуальное окружение.

* **Генерация документации**:

Генерация документации `API` python-пакета в формате `Markdown` с помощью `pydoc-markdown`.

* **Очистка**:

Временные файлы (репозитории и виртуальные окружения) удаляются после завершения работы.

## Используемые технологии

- **Python 3**: Основной язык для скриптов.
- **pydoc-markdown**: Инструмент для генерации документации из Python-кода.
- **Docker**: Для создания изолированной среды выполнения.

## Установка и запуск

### Сборка Docker-образа

Для сборки Docker-образа выполните следующую команду:

```bash
docker build -t github-docs-generator -f docker/Dockerfile .
```

### Запуск Docker-контейнера

Для запуска контейнера и генерации документации выполните:

```bash
docker run -it --rm -v $(pwd):/workspace -u $(id -u):$(id -g) github-docs-generator python3 generate_docs.py
```

### Файл "repos.txt"

Перед запуском убедитесь, что у вас есть файл `repos.txt` в корневой директории проекта. Этот файл должен содержать список `GitHub`-репозиториев и тегов их версий, для которых нужно сгенерировать документацию. 

Пример содержимого файла `repos.txt`:

```
https://github.com/VLMHyperBenchTeam/benchmark_run_config.git 0.1.2
https://github.com/VLMHyperBenchTeam/metric_evaluator.git 0.1.0
```

Каждая строка содержит URL репозитория и тег версии, разделенные пробелом.

## Структура проекта

- **`docker/Dockerfile`**: Docker-файл для создания образа с необходимыми зависимостями.
- **`generate_docs.py`**: Основной скрипт для генерации документации.
- **`repos.txt`**: Файл со списком репозиториев для обработки.
- **`docs/`**: Директория, в которую сохраняется сгенерированная документация.

## Пример использования

1. Создайте файл `repos.txt` с URL репозиториев и версиями.
2. Запустите Docker-контейнер, как описано выше.
3. После завершения работы сгенерированная документация будет сохранена в директории `docs/`.

## Лицензия

Этот проект распространяется под лицензией `MIT`. Подробности см. в файле [LICENSE](LICENSE).

## Контакты

Если у вас есть вопросы или предложения, пожалуйста, свяжитесь с автором проекта:

- **GitHub**: [medphisiker](https://github.com/medphisiker).